(ns upgraded-winner.install
  (:require [compojure.core :refer [defroutes routes]]
            [ring.middleware.resource :refer [wrap-resource]]
            [ring.middleware.file-info :refer [wrap-file-info]]
            [ring.middleware.params :refer [wrap-params]]
            [hiccup.middleware :refer [wrap-base-url]]
            [compojure.handler :as handler]
            [compojure.route :as route]
            [hugsql.core :as hugsql]
            [clojure.java.jdbc :refer [db-do-commands]]))

(hugsql/def-sqlvec-fns "queries/make_db.sql")
(hugsql/def-db-fns "queries/make_db.sql")

(def db {:dbtype "postgresql"
         :dbname "upgraded_winner"
         :user "postgres"
         :host "db"
         :password "1234"})

;; make the database
(db-do-commands db false "create database upgraded_winner")
(create-users-table db)
